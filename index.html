<!DOCTYPE html>
<html>
<head>
	<title>BUMPER. Bugs Metarepository for developers and researchers.</title>
	<link rel="stylesheet" type="text/css" href="css.css">
	<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="icon" href="favicon.ico" type="image/x-icon">
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
	<script src="https://static.firefame.com/js/jquery.knob.js"></script>
	<script src="js/k_means/data.js"></script>
	<script src="js/k_means/k_means.js"></script>
</head>
<body>

<div id="page_border">

	<div id="menu">
		<a class="menu left" href="index.html">HOME</a>
		<a class="menu left"  href="#">API</a>
		<a class="menu left"  href="#">PAPERS</a>
		<a class="menu right" href="#"><span class="acro">Bu</span>g <span class="acro">M</span>etare<span class="acro">p</span>o for d<span class="acro">e</span>v &amp; <span class="acro">r</span>esearch</a>
	</div>

	<div id="search">

		<div id="searchContainer">
			<p id="search_statistics"></p>
			<form id="search_form">
				<input id="field" name="field" type="text" />
				<div id="delete"><span id="x">x</span></div>
				<input  id="submit" name="submit" type="submit" value="&#xf002;" />
			</form>
		</div>

		<div id="download_button">
			<a target="_blank" id="xml" href="#">XML</a>
			<a target="_blank" id="json" href="#">JSON</a>
			<a target="_blank" id="csv" href="#">CSV</a>
		</div>

	</div>

	<div id="results">

	</div>

	<canvas id="canvas" height="400" width="900px" style=" padding-left: 0;
    padding-right: 0;
    margin-left: auto;
    margin-right: auto;
    height: 400px;
    width: 900px;
     display: block;"></canvas>

	<div id="stats">
		<span class='separator_stats'>&nbsp;&nbsp;&nbsp;</span>
		<h2>A few stats</h2>
		56 k bugs <i class="fa fa-bug"></i>, 122 k commits <i class="fa fa-file-code-o"></i>, 410 k comments <i class="fa fa-comments"></i>, 530+ popular open source project <i class="fa fa-users"></i> <br />


		<p class="knober" style="float:left">
		<input class="knob_percent num1" data-inputColor="black"
			data-fontWeight="normal" readonly data-bgcolor="#b7b7b7"
			data-max="100" data-min="0" data-width="120" data-height="120"
			data-cursor=false data-fgColor="#4d90fe"
			data-thickness=.1
			value="0" rel="51">
		<br />
		Bug linked to commit</p>

		<p class="knober" style="float:left">
		<input class="knob_percent num2" data-inputColor="black"
			data-fontWeight="normal" readonly data-bgcolor="#b7b7b7"
			data-max="100" data-min="0" data-width="120" data-height="120"
			data-cursor=false data-fgColor="#4d90fe"
			data-thickness=.1
			value="0" rel="44">
		<br />
		<a href="bug_taxonmy.html">Type 1 bugs</a>
		</p>

		<p class="knober" style="float:left">
		<input class="knob_percent num3" data-inputColor="black"
			data-fontWeight="normal" readonly data-bgcolor="#b7b7b7"
			data-max="100" data-min="0" data-width="120" data-height="120"
			data-cursor=false data-fgColor="#4d90fe"
			data-thickness=.1
			value="0" rel="32">
		<br />
		<a href="bug_taxonmy.html">Type 2 bugs</a>
		</p>

		<p class="knober" style="float:left">
		<input class="knob_percent num4" data-inputColor="black"
			data-fontWeight="normal" readonly data-bgcolor="#b7b7b7"
			data-max="100" data-min="0" data-width="120" data-height="120"
			data-cursor=false data-fgColor="#4d90fe"
			data-thickness=.1
			value="0" rel="7">
		<br />
		<a href="bug_taxonmy.html">Type 3 bugs</a>
		</p>

		<p class="knober" style="float:left">
		<input class="knob_percent num5" data-inputColor="black"
			data-fontWeight="normal" readonly data-bgcolor="#b7b7b7"
			data-max="100" data-min="0" data-width="120" data-height="120"
			data-cursor=false data-fgColor="#4d90fe"
			data-thickness=.1
			value="0" rel="17">
		<br />
		<a href="bug_taxonmy.html">Type 4 bugs</a>
		</p>

	</div>

	<div id="footer">
		<div id="footer_left">
			Made with <i style="color:#CC0F0F!important" class="fa fa-heart"></i> by <a href="http://mathieu-nayrolles.com">Mathieu Nayrolles</a> member of the <a href="http://users.encs.concordia.ca/~abdelw/sba/">Software Behaviour Analysis (SBA)</a> Research Lab <br />
			<a href="https://www.concordia.ca/">Concordia University</a>, Montr&eacute;al, Qu&eacute;bec, Canada.
		</div>
		<div id="footer_right">
			If you want to learn more about <a href="http://lucene.apache.org/solr/">Apache Solr</a>, the full-text search engine powering BUMPER, make sure to get yourself a copy of <a href="http://www.amazon.com/Mastering-Apache-Solr-practical-guide/dp/8192784509/ref=sr_1_1?ie=UTF8&qid=1400238519&sr=8-1&keywords=mastering+inkstall" title="Mastering Apache Solr">Mastering Apache Solr</a>.
		</div>
	</div>

</div>

<script type="text/javascript">

var response;
$( "#search_form" ).submit(function( event ) {

  $("#download_button").hide();
  $.ajax({
  	url:"http://localhost:8983/solr/bugregator/select?q={!dismax}"+$("#field").val()+"&qf=id^1 date^1 project^1 bug_status^1 reporter_pseudo^1 reporter_name^1 assigned_to_pseudo^1 assigned_to_name^1 title^1 description^1 comment^1&wt=json&indent=true&hl.fl=*&hl.simple.pre=<em>&hl.simple.post=</em>&hl.snippets=5",
  	dataType: 'jsonp',
  	jsonp: 'json.wrf',
  	success: function(res){

  		$("#xml").attr("href", "http://localhost:8983/solr/bugregator/select?q={!dismax}"+$("#field").val()+"&qf=id^1 date^1 project^1 bug_status^1 reporter_pseudo^1 reporter_name^1 assigned_to_pseudo^1 assigned_to_name^1 title^1 description^1 comment^1&wt=xml&indent=true&hl.fl=*&hl.simple.pre=<em>&hl.simple.post=</em>&hl.snippets=5");

  		$("#json").attr("href", "http://localhost:8983/solr/bugregator/select?q={!dismax}"+$("#field").val()+"&qf=id^1 date^1 project^1 bug_status^1 reporter_pseudo^1 reporter_name^1 assigned_to_pseudo^1 assigned_to_name^1 title^1 description^1 comment^1&wt=json&indent=true&hl.fl=*&hl.simple.pre=<em>&hl.simple.post=</em>&hl.snippets=5");

  		$("#csv").attr("href", "http://localhost:8983/solr/bugregator/select?q={!dismax}"+$("#field").val()+"&qf=id^1 date^1 project^1 bug_status^1 reporter_pseudo^1 reporter_name^1 assigned_to_pseudo^1 assigned_to_name^1 title^1 description^1 comment^1&wt=csv&indent=true&hl.fl=*&hl.simple.pre=<em>&hl.simple.post=</em>&hl.snippets=5");

  		$("#search_statistics").html(res.response.numFound + " <i class='fa fa-bug'></i> found in " +res.responseHeader.QTime+" ms <i class='fa fa-clock-o'></i>");

  		if(res.response.numFound!="0"){
  			$("#download_button").show();
  		}

  		var html = "";

  		$.each(res.response.docs, function( index, value ) {
		  	var bug = "<div class='bug_result'>"
		  	+ "<div class='bug_left'>"
		  	+ "<p class='bug_result_id'> <i class='fa fa-key'></i> " + value.id + " <p>"
		  	+ "<p class='bug_result_date'> <i class='fa fa-calendar-o'> " + value.date + " </i></p>"
		  	+ "<p class='bug_result_project'> <i class='fa fa-users'></i> " + value.project + " ("+value.sub_project+") </p>"
		  	+ "<p class='bug_result_bug_status'> Status: " + value.bug_status + "</p>"
		  	+ "<p class='bug_result_resolution'> Resolution: " + value.resolution + "</p>"
		  	+ "<p class='bug_result_bug_severity'> Severity: " + value.bug_severity + "</p>"
		  	+ "<p class='bug_result_reporter'> Reporter: " + value.reporter_pseudo + " (" + value.reporter_name + ")</p>"
		  	+ "<p class='bug_result_assignee'> Assigned: " + value.assigned_to_pseudo + " (" + value.assigned_to_name + ")</p>"
		  	+ "<p class='bug_result_comment_amount'> <i class='fa fa-comments'></i> " + value.comment.length +  "</p>"
		  	+ "<p class='bug_result_changset'> <i class='fa fa-file-code-o'></i> : <a href='#'>ID</a></p>"
		  	+ "<p class='bug_result_structural_change'> <i class='fa fa-cogs'></i> : 0 changes</p>"
		  	+ "</div><div class='bug_right'>"
		  	+ "<p class='bug_result_title'>" + value.title + "</p><br />"
		  	+ "<p class='bug_result_description'>" + value.description.replace("\\n", "<br />") + "</p>" + 
		  	+ "<div class='bug_result_comments'>";

		  	$.each(value.comment, function( index, value ){
		  		var parsedComment = value.split('*`|`*');
		  		var comment = "<div class='bug_result_comment'>"
		  		+ "<p class='bug_result_commenter'> " + parsedComment[0] + " ("+ parsedComment[1] + ") @ " + parsedComment[2] +"<p>"
		  		+ "<p class='bug_result_comment'> " + parsedComment[3].replace("\\n", "<br />") + "<p>"
		  		+ "</div>";

		  		bug = bug + comment;
		  	});

		  	bug = bug + "</div></div></div>";

		  	html = html + bug + "<div id='clear'></div>";

		});

  		$("#results").html(html);
  	}
  });

  event.preventDefault();
});


$(document).ready(function() {
	// if text input field value is not empty show the "X" button
	$("#field").keyup(function() {
		$("#x").fadeIn();
		if ($.trim($("#field").val()) == "") {
			$("#x").fadeOut();
		}
	});
	// on click of "X", delete input field value and hide "X"
	$("#x").click(function() {
		$("#field").val("");
		$(this).hide();
	});

	 $(".knob_percent").knob({
      'draw' : function () { 
        $(this.i).val(this.cv + '%')
      }
    });

	 $({value: 0}).animate({value: $('.num1').attr("rel")}, {
        duration: 3000,
        easing:'swing',
        step: function() 
        {
            $('.num1').val(Math.ceil(this.value)).trigger('change');
        }
    });

	 $({value: 0}).animate({value: $('.num2').attr("rel")}, {
        duration: 3000,
        easing:'swing',
        step: function() 
        {
            $('.num2').val(Math.ceil(this.value)).trigger('change');
        }
    });

	$({value: 0}).animate({value: $('.num3').attr("rel")}, {
        duration: 3000,
        easing:'swing',
        step: function() 
        {
            $('.num3').val(Math.ceil(this.value)).trigger('change');
        }
    });

    $({value: 0}).animate({value: $('.num4').attr("rel")}, {
        duration: 3000,
        easing:'swing',
        step: function() 
        {
            $('.num4').val(Math.ceil(this.value)).trigger('change');
        }
    });

    $({value: 0}).animate({value: $('.num5').attr("rel")}, {
        duration: 3000,
        easing:'swing',
        step: function() 
        {
            $('.num5').val(Math.ceil(this.value)).trigger('change');
        }
    });



});
</script>

</body>
</html>